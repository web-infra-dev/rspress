# 用 wrap 和 eject 定制主题

本篇结合 Rspress 的[自定义主题](/zh/ui/custom-theme)与 Docusaurus 的 [Swizzling](https://docusaurus.io/docs/swizzling) 思想，说明如何覆盖默认主题组件，并厘清 Wrap 与 Eject 的区别。

## `theme/index.tsx`：重导出覆盖内置组件

Rspress 通过项目根目录的 `theme/index.tsx` 加载主题。你可以在这里通过 **ESM 重导出**覆写默认导出或同名组件，所有 Rspress 内部引用的内置组件都会优先使用你重导出的版本：

```tsx title="theme/index.tsx"
import { Layout as BasicLayout } from '@rspress/core/theme-original';

const Layout = () => <BasicLayout beforeNavTitle={<div>some content</div>} />;

export { Layout };

export * from '@rspress/core/theme-original';
```

- `Layout` 是主题入口，Rspress 会自动加载；通过同名导出你可以替换或包裹默认组件。
- `export * from '@rspress/core/theme-original'` 保留默认主题的其它导出，仅对你覆写的组件生效。
- 该能力是所有自定义方式的基础：你可以只包裹默认组件，也可以在重导出前彻底替换。

## Wrap：在重导出的基础上传 props/插槽

Wrap 指在重导出的组件上增加 props 进行定制，例如利用 Layout 的插槽：

- 不需要触碰主题源码，升级默认主题时只需维护自定义 props/插槽。
- 适合样式微调、插槽填充、替换少量同名组件等场景。

## Eject：复制源码后直接修改

Eject 指使用 CLI `rspress eject` 将 `@rspress/core/theme-original` 的源码拷贝到本地，然后直接改动：

- 会生成可编辑的主题源码副本，便于深度定制内部逻辑。
- 与上游主题解耦，升级时需要手动同步变更。

## 选择建议

- **优先使用 Wrap**：在 `theme/index.tsx` 中包裹 + 重导出，借助 props/插槽/同名导出进行覆盖，升级成本低。
- **再考虑 Eject**：只有在 Wrap 无法满足深度改动（例如调整内部实现逻辑）时，再执行 `rspress eject`。
